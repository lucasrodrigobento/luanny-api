generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model NfeLog {
  id         Int       @id @default(autoincrement())
  cnpj       String
  createdAt  DateTime  @default(now())
  cStat      String?
  xMotivo    String?
  ultNSU     String?
  tpAmb      String?
  xmlEnviado String?
  soapRaw    String?
  notas      NfeNota[]
}

model NfeNota {
  id                     Int          @id @default(autoincrement())
  numero                 String       @unique
  dataEmissao            String?
  emitente               String?
  valor                  Float?
  logId                  Int
  cnpjEmitente           String?
  cpfDestinatario        String?
  destinatario           String?
  cnpjTransportadora     String?
  enderecoDestinatario   String?
  enderecoEmitente       String?
  modFrete               String?
  natOp                  String?
  placaVeiculo           String?
  transportadora         String?
  ufVeiculo              String?
  cDV                    String?
  cMunFG                 String?
  cNF                    String?
  cUF                    String?
  crtEmitente            String?
  enderecoTransportadora String?
  finNFe                 String?
  idDest                 String?
  ieEmitente             String?
  indFinal               String?
  indIEDest              String?
  indPres                String?
  mod                    String?
  nomeFantasia           String?
  procEmi                String?
  serie                  String?
  tpAmb                  String?
  tpEmis                 String?
  tpImp                  String?
  tpNF                   String?
  vBC                    Float?
  vFCP                   Float?
  vICMS                  Float?
  vICMSDeson             Float?
  vProd                  Float?
  verProc                String?
  log                    NfeLog       @relation(fields: [logId], references: [id])
  produtos               NfeProduto[]
}

model NfeProduto {
  id            Int     @id @default(autoincrement())
  codigo        String?
  descricao     String?
  quantidade    Float?
  valorUnitario Float?
  valorTotal    Float?
  notaId        Int
  cfop          String?
  unidade       String?
  nItem         Int?
  nota          NfeNota @relation(fields: [notaId], references: [id])
}
